var tpr=tpr||{};tpr.user=undefined;tpr.guides=(function($){var COUNTRIES=[];function getStaticData(callback){var data={"status":"success","status_code":200,"message":"","data":{"country_codes":[["Afghanistan-93","https://haygot.s3.amazonaws.com/country_flags/60x60/AF.png","AF"],["Argentina-54","https://haygot.s3.amazonaws.com/country_flags/60x60/AR.png","AR"],["Australia-61","https://haygot.s3.amazonaws.com/country_flags/60x60/AU.png","AU"],["Austria-43","https://haygot.s3.amazonaws.com/country_flags/60x60/AT.png","AT"],["Bahrain-973","https://haygot.s3.amazonaws.com/country_flags/60x60/BH.png","BH"],["Bangladesh-880","https://haygot.s3.amazonaws.com/country_flags/60x60/BD.png","BD"],["Belgium-32","https://haygot.s3.amazonaws.com/country_flags/60x60/BE.png","BE"],["Bhutan-975","https://haygot.s3.amazonaws.com/country_flags/60x60/BT.png","BT"],["Canada-1","https://haygot.s3.amazonaws.com/country_flags/60x60/CA.png","CA"],["China-86","https://haygot.s3.amazonaws.com/country_flags/60x60/CN.png","CN"],["Hong Kong-852","https://haygot.s3.amazonaws.com/country_flags/60x60/HK.png","HK"],["Hungary-36","https://haygot.s3.amazonaws.com/country_flags/60x60/HU.png","HU"],["India-91","https://haygot.s3.amazonaws.com/country_flags/60x60/IN.png","IN"],["Japan-81","https://haygot.s3.amazonaws.com/country_flags/60x60/JP.png","JP"],["Kuwait-965","https://haygot.s3.amazonaws.com/country_flags/60x60/KW.png","KW"],["Malaysia-60","https://haygot.s3.amazonaws.com/country_flags/60x60/MY.png","MY"],["Maldives-960","https://haygot.s3.amazonaws.com/country_flags/60x60/MV.png","MV"],["Nepal-977","https://haygot.s3.amazonaws.com/country_flags/60x60/NP.png","NP"],["New Zealand-64","https://haygot.s3.amazonaws.com/country_flags/60x60/NZ.png","NZ"],["Oman-968","https://haygot.s3.amazonaws.com/country_flags/60x60/OM.png","OM"],["Pakistan-92","https://haygot.s3.amazonaws.com/country_flags/60x60/PK.png","PK"],["Qatar-974","https://haygot.s3.amazonaws.com/country_flags/60x60/QA.png","QA"],["Saudi Arabia-966","https://haygot.s3.amazonaws.com/country_flags/60x60/SA.png","SA"],["Singapore-65","https://haygot.s3.amazonaws.com/country_flags/60x60/SG.png","SG"],["South Korea-82","https://haygot.s3.amazonaws.com/country_flags/60x60/KR.png","KR"],["Spain-34","https://haygot.s3.amazonaws.com/country_flags/60x60/ES.png","ES"],["Sri Lanka-94","https://haygot.s3.amazonaws.com/country_flags/60x60/LK.png","LK"],["Switzerland-41","https://haygot.s3.amazonaws.com/country_flags/60x60/CH.png","CH"],["Thailand-66","https://haygot.s3.amazonaws.com/country_flags/60x60/TH.png","TH"],["United Arab Emirates-971","https://haygot.s3.amazonaws.com/country_flags/60x60/AE.png","AE"],["United Kingdom-44","https://haygot.s3.amazonaws.com/country_flags/60x60/GB.png","GB"],["United States-1","https://haygot.s3.amazonaws.com/country_flags/60x60/US.png","US"],["Uruguay-598","https://haygot.s3.amazonaws.com/country_flags/60x60/UY.png","UY"]]}};var country_codes=data.country_codes||[];for(var i=0;i<country_codes.length;i++){var country={};var country_data=country_codes[i];country.name=country_data[0].split("-")[0];country.code=country_data[0].split("-")[1];country.flag=country_data[1];COUNTRIES.push(country);}
callback(COUNTRIES);}
function getCountriesList(callback,n_tries){if(COUNTRIES&&COUNTRIES.length){onSuccess();return;}
n_tries=n_tries||1;$.ajax({url:"/api/v5.0/country-codes/",type:"GET",crossDomain:true,success:function(resp){if(resp&&resp.status=='success'){var country_codes=resp.data.country_codes||[];for(var i=0;i<country_codes.length;i++){var country={};var country_data=country_codes[i];country.name=country_data[0].split("-")[0];country.code=country_data[0].split("-")[1];country.flag=country_data[1];COUNTRIES.push(country);}
onSuccess();}else{onError();}},error:function(){onError();}});function onSuccess(){if(callback)
callback(COUNTRIES);}
function onError(){if(n_tries<3){setTimeout(function(){getCountriesList(callback,n_tries+1);},1000);}}}
function initSignupPopup(){var $popupWrapper=$("#signupPopupWrapper");var $popup=$("#signupPopup");var $form=$popup.find("form");var $countryDropdown=$form.find(".js-country-dropdown");var $selectedCountryCode=$form.find(".js-selected-country-code");var $inputPhone=$form.find("input[name='phone']");var $inputCountryName=$form.find("input[name='country_name']");var $inputCountryCode=$form.find("input[name='country_code']");var $btnSubmit=$form.find("input[name='submit']");var $btnClosePopup=$popup.find(".js-close-popup");var $errorText=$popup.find(".js-error-text");var $classDropBtn=$popup.find(".classDropdownBtn");var $classItem=$popup.find(".dropdown-class-item");var $formSubmitBtn=$popup.find(".popup-submit-btn");var SUBMIT_IN_PROGRESS=false;var WAIT_TIME_FINISHED=false;setTimeout(function(){WAIT_TIME_FINISHED=true;},2000);$btnClosePopup.click(function(){closePopup();});$selectedCountryCode.click(toggleCountryDropdown);fetchCountriesAndInit();function fetchCountriesAndInit(){if(tpr.user)
return;tpr.guides.getCountriesList(function(countries){for(var i=0;i<countries.length;i++){let country=countries[i];let $country=$('<li>'+country.name+' <span class="countryCode">[+'+country.code+']</span></li>');$country.click(function(){onCountryClicked(country);});$countryDropdown.append($country);}
initScrollListener();});}
function initScrollListener(){var doc_height=document.body.offsetHeight;var isPopupVisible=false;document.addEventListener('scroll',function(event){if(WAIT_TIME_FINISHED&&!isPopupVisible&&!tpr.user&&!isCookieSet()&&window.location.pathname.search('cheat-sheet')<0){if((window.scrollY)/doc_height>0.10){isPopupVisible=true;openPopup();var date=new Date();date.setTime(date.getTime()+(15*60*1000));document.cookie="center_cta=yes; expires="+date.toGMTString();}}});function isCookieSet(){return document.cookie.split(';').indexOf('center_cta=yes')==-1?0:1;}}
function onCountryClicked(country){if($inputCountryName.val()!=country.name){$inputCountryName.val(country.name);$inputCountryCode.val(country.code);$inputPhone.val("");$selectedCountryCode.text("+"+country.code);$errorText.text("");if(country.name=="India"){$inputPhone.attr('maxlength',10);}else{$inputPhone.removeAttr('maxlength');}}
closeCountryDropdown();}
function toggleCountryDropdown(){$countryDropdown.toggleClass("show");}
function openCountryDropdown(){$countryDropdown.addClass("show");}
function closeCountryDropdown(){$countryDropdown.removeClass("show");}
function openPopup(){$popupWrapper.show();setTimeout(function(){$popup.addClass("is-visible");},0);}
function closePopup(){$popup.removeClass("is-visible");setTimeout(function(){$popupWrapper.hide();},100);}
function disableForm(){SUBMIT_IN_PROGRESS=true;$btnSubmit.attr("disabled",true).val("Signing up...");$btnClosePopup.hide();}
function enableForm(){SUBMIT_IN_PROGRESS=false;$btnSubmit.attr("disabled",false).val("Sign up");$btnClosePopup.show();}
$inputPhone.change(function(){$errorText.text('');});$classItem.click(function(event){var klass=$(this).data('class');$classDropBtn.html("Class "+klass);$classDropBtn.attr('data-class',klass);document.getElementById("myDropdown").classList.remove("show");});$formSubmitBtn.click(function(e){e.preventDefault();if(SUBMIT_IN_PROGRESS)
return;var phone=$inputPhone.val();var countryName=$inputCountryName.val();var klass=$classDropBtn.data('class');if(!phone||!phone.length||!/^\d+$/.test(phone)){$errorText.text("Please enter a valid phone number");return;}
if(countryName=="India"&&phone.length!=10){$errorText.text("Please enter a 10 digit phone number");return;}
disableForm();handleSignup($inputPhone.val(),$inputCountryName.val(),klass);});function handleSignup(phone,country_name,klass,n_tries){n_tries=n_tries||1;$.ajax({type:"POST",url:"/api/v5.0/check-phone/",data:{phone:phone,country_name:country_name,},success:function(response){if(response.status=="success"){if(response.data.is_new_phone){createNewAccount({phone:phone,country_name:country_name,klass:klass,});return;}else{$form.unbind('submit').submit();window.open('/login','_self');return;}}
onFailure(true);},error:function(){onFailure();}});function onFailure(skip_retry){if(n_tries<3&&!skip_retry){setTimeout(function(){handleSignup(phone,country_name,klass,n_tries+1);},500);}else{enableForm();}}}
function createNewAccount(post_data,n_tries){if(!post_data)
return;n_tries=n_tries||1;$.ajax({type:"POST",url:"/api/v5.0/signup/?utm_medium=bytes",data:post_data,success:function(response){if(response.status=="success"){window.location="/?utm_source=guides&utm_medium=popup&utm_campaign=varianta&klass="+post_data.klass;return;}
onFailure(true);},error:function(){onFailure();}});function onFailure(skip_retry){if(n_tries<3&&!skip_retry){setTimeout(function(){createNewAccount(post_data,n_tries+1);},500);}else{enableForm();}}}}
return{getCountriesList:getCountriesList,initSignupPopup:initSignupPopup,};})(jQuery);